"use strict";(self["webpackChunkweek5"]=self["webpackChunkweek5"]||[]).push([[133],{8133:function(t,e,a){a.r(e),a.d(e,{default:function(){return je}});var o=a(6252),r={class:"bg-gray-100"},l={class:"container"};function n(t,e,a,n,i,c){var d=(0,o.up)("ProductsTable"),s=(0,o.up)("ModalCardDelete"),u=(0,o.up)("ModalCardDetail"),p=(0,o.up)("ModalCardAddition"),g=(0,o.up)("Modal");return(0,o.wg)(),(0,o.iD)("main",r,[(0,o._)("div",l,[(0,o.Wm)(d),(0,o.Wm)(g,null,{default:(0,o.w5)((function(){return["productDelete"===n.modalState?((0,o.wg)(),(0,o.j4)(s,{key:0})):(0,o.kq)("",!0),"getDetail"===n.modalState?((0,o.wg)(),(0,o.j4)(u,{key:1})):(0,o.kq)("",!0),"productEdit"===n.modalState||"productCreate"===n.modalState?((0,o.wg)(),(0,o.j4)(p,{key:2,products:n.products},null,8,["products"])):(0,o.kq)("",!0)]})),_:1})])])}var i=a(2119),c=a(8358),d=a(3577),s={class:"space-y-4 p-2 overflow-auto"},u={class:"flex justify-end items-center p-6 gap-4"},p=(0,o._)("h2",{class:"text-4xl font-medium"},"產品列表",-1),g=(0,o._)("h2",{class:"text-xl ml-auto"},"管理者登出",-1),f={class:"table-auto mb-4 rounded bg-gray-50"},w=(0,o._)("thead",{class:"bg-gray-800"},[(0,o._)("tr",{class:"text-white"},[(0,o._)("td",{width:"200",class:"p-4 text-lg whitespace-nowrap"},"產品名稱"),(0,o._)("td",{width:"250",class:"p-4 text-lg whitespace-nowrap text-right"}," 原價 "),(0,o._)("td",{width:"250",class:"p-4 text-lg whitespace-nowrap text-right"}," 售價 "),(0,o._)("td",{width:"250",class:"p-4 text-lg whitespace-nowrap text-center"}," 是否啟用 "),(0,o._)("td",{width:"200",class:"p-4 text-lg whitespace-nowrap text-center"}," 查看細節 "),(0,o._)("td",{colspan:"2",width:"400",class:"p-4 text-lg whitespace-nowrap text-center"}," 功能 ")])],-1),h={class:"py-2 px-4 whitespace-nowrap"},m={class:"py-2 px-4 whitespace-nowrap text-right"},b={class:"py-2 px-4 whitespace-nowrap text-right"},v={key:0,class:"py-2 px-4 whitespace-nowrap text-primary-400 text-center"},y={key:1,class:"py-2 px-4 whitespace-nowrap text-gray-400 text-center"},x={key:2,class:"py-2 px-4 whitespace-nowrap text-warning-600 text-center"},_={key:3,class:"py-2 px-4 whitespace-nowrap text-danger-700 text-center"},k={class:"py-2 px-4 text-center whitespace-nowrap"},D=["onClick"],C={class:"py-2 px-4 text-center whitespace-nowrap"},M=["onClick"],P={class:"py-2 px-4 text-center whitespace-nowrap"},U=["onClick"],L={class:"flex justify-between items-center"},z={class:"flex justify-center items-center gap-2"},S={class:""},I=["disabled"],j=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"})],-1),T=[j],F=["onClick"],Z={class:""},q=["disabled"],E=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"})],-1),A=[E];function H(t,e,a,r,l,n){return(0,o.wg)(),(0,o.iD)("section",s,[(0,o._)("div",u,[p,g,(0,o._)("button",{class:"rounded px-6 py-2 bg-danger-500 text-white hover:bg-danger-600 hover:shadow hover:shadow-danger-400 transition duration-300",onClick:e[0]||(e[0]=function(t){return r.handleIsLogout()})}," 登出 ")]),(0,o._)("table",f,[w,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.productList.products,(function(t){return(0,o.wg)(),(0,o.iD)("tr",{class:"border-b border-gray-300 hover:bg-gray-200",key:t.id},[(0,o._)("td",h,(0,d.zw)(t.title),1),(0,o._)("td",m,(0,d.zw)(t.origin_price),1),(0,o._)("td",b,(0,d.zw)(t.price),1),1==t.is_enabled?((0,o.wg)(),(0,o.iD)("td",v," 啟用 ")):0==t.is_enabled?((0,o.wg)(),(0,o.iD)("td",y," 未啟用 ")):2==t.is_enabled?((0,o.wg)(),(0,o.iD)("td",x," 未上架 ")):(0,o.kq)("",!0),3==t.is_enabled?((0,o.wg)(),(0,o.iD)("td",_," 已下架 ")):(0,o.kq)("",!0),(0,o._)("td",k,[(0,o._)("button",{type:"button",class:"text-white bg-primary-500 rounded py-2 px-4 hover:bg-primary-600 hover:shadow hover:shadow-primary-400 transition duration-200",onClick:function(e){return r.openModal("getDetail",t)}}," 查看細節 ",8,D)]),(0,o._)("td",C,[(0,o._)("button",{type:"button",class:"text-white bg-secondary-700 rounded py-2 px-4 hover:bg-secondary-800 hover:shadow hover:shadow-secondary-400 transition duration-200",onClick:function(e){return r.openModal("productEdit",t)}}," 修改內容 ",8,M)]),(0,o._)("td",P,[(0,o._)("button",{type:"button",class:"text-white bg-danger-500 rounded py-2 px-4 hover:bg-danger-600 hover:shadow hover:shadow-danger-400 transition duration-200",onClick:function(e){return r.openModal("productDelete",t)}}," 刪除品項 ",8,U)])])})),128))])]),(0,o._)("div",L,[(0,o._)("p",null,"目前有"+(0,d.zw)(r.productList.products.length)+"項產品",1),(0,o._)("button",{type:"button",class:"text-white bg-warning-500 rounded py-2 px-4 hover:bg-warning-600 hover:shadow hover:shadow-warning-400 transition duration-200",onClick:e[1]||(e[1]=function(t){return r.openModal("productCreate",r.tempProduct)})}," 新增品項 ")]),(0,o._)("div",null,[(0,o._)("ul",z,[(0,o._)("li",S,[(0,o._)("button",{type:"button",class:"p-2 rounded border border-primary-500 text-primary-500 disabled:border-gray-400 disabled:text-gray-500",disabled:!r.productList.pagination.has_pre,onClick:e[2]||(e[2]=function(t){return r.handleGetProductList(r.productList.pagination.current_page-1)})},T,8,I)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.productList.pagination.total_pages,(function(t){return(0,o.wg)(),(0,o.iD)("li",{key:t+new Date},[(0,o._)("button",{type:"button",class:(0,d.C_)(["py-[6px] px-3 rounded border-primary-500",{"bg-primary-700 text-white":t===r.productList.pagination.current_page}]),onClick:function(e){return r.handleGetProductList(t)}},(0,d.zw)(t),11,F)])})),128)),(0,o._)("li",Z,[(0,o._)("button",{type:"button",class:"p-2 rounded border border-primary-500 text-primary-500 disabled:border-gray-400 disabled:text-gray-500",disabled:!r.productList.pagination.has_next,onClick:e[3]||(e[3]=function(t){return r.handleGetProductList(r.productList.pagination.current_page+1)})},A,8,q)])])])])}var O=a(2262),V={setup:function(){var t=(0,c.Z)(),e=t.adminStore,a=t.adminProductStore,r=t.modalStore,l=e.handleSetLogout,n=e.handleClearToken,d=a.productList,s=a.handleGetProductList,u=r.openModal,p=(0,i.tv)(),g=(0,O.iH)({title:"",category:"",origin_price:0,price:0,unit:"",description:"",content:"",is_enabled:"",imageUrl:"",imagesUrl:[]});function f(){n(),l(),p.push("/")}return(0,o.bv)((function(){s()})),{productList:(0,o.Fl)((function(){return d})),openModal:u,tempProduct:g,handleIsLogout:f,handleGetProductList:s}}},B=a(3744);const G=(0,B.Z)(V,[["render",H]]);var R=G;function K(t,e,a,r,l,n){return(0,o.wg)(),(0,o.j4)(o.lR,{to:"body"},[(0,o._)("div",{ref:"targetElement",class:(0,d.C_)(["absolute top-0 left-0 right-0 bottom-0 w-full h-full min-h-screen bg-gray-700 bg-opacity-50 backdrop-blur-[2px] backdrop",r.isOpenModal?"":"invisible -z-10"]),onClick:e[0]||(e[0]=function(){return r.handlerBackdropClick&&r.handlerBackdropClick.apply(r,arguments)})},[(0,o._)("div",{class:(0,d.C_)(["transition-all container backdrop p-8 flex justify-center items-center",r.isOpenModal?"ease-[cubic-bezier(.51,.24,.32,1.3)] duration-300":"scale-0 opacity-0 ease-[cubic-bezier(.31,1.09,1,.99)] duration-75"])},[(0,o.WI)(t.$slots,"default")],2)],2)])}a(4916),a(4723);var N={setup:function(){var t=(0,c.Z)(),e=t.modalStore,a=e.state,r=e.closeModal;function l(t){if("svg"===t.path[0].nodeName||"path"===t.path[0].nodeName)return null;t.path[0].className.match("backdrop")&&r()}return{isOpenModal:(0,o.Fl)((function(){return a.isOpen})),handlerBackdropClick:l}}};const W=(0,B.Z)(N,[["render",K]]);var Y=W,$=(a(2526),a(1817),a(9963)),J={class:"flex flex-col overflow-hidden space-y-4 bg-gray-50 rounded-md pb-4"},Q={class:"flex justify-between p-4"},X=["src","alt"],tt={class:"p-4 flex-1 space-y-8"},et={class:"flex items-center gap-4"},at={class:"font-bold text-xl mb-2"},ot={class:"px-2 py-1 ml-2 rounded text-sm bg-primary-400 text-white"},rt={class:"flex items-center gap-1"},lt={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 text-warning-500",viewBox:"0 0 16 16"},nt=(0,o._)("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"},null,-1),it=[nt],ct={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 text-gray-400",viewBox:"0 0 16 16"},dt=(0,o._)("path",{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"},null,-1),st=[dt],ut={class:"space-y-4"},pt={class:"pl-1 text-gray-400 line-through"},gt=(0,o.Uk)(" 個 / 元 "),ft={class:"flex gap-4 overflow-x-auto"},wt=["src"];function ht(t,e,a,r,l,n){var i=(0,o.up)("ModalCardTitle");return(0,o.wg)(),(0,o.iD)("section",J,[(0,o.Wm)(i,{title:"產品詳細內容","close-modal":r.closeModal},null,8,["close-modal"]),(0,o._)("div",Q,[(0,o._)("img",{class:"max-h-[300px]",src:r.targetProduct.imageUrl,alt:r.targetProduct.title},null,8,X),(0,o._)("div",tt,[(0,o._)("div",et,[(0,o._)("h2",at,[(0,o.Uk)((0,d.zw)(r.targetProduct.title)+" ",1),(0,o._)("span",ot,(0,d.zw)(r.targetProduct.category),1)]),(0,o._)("ul",rt,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(5,(function(t,e){return(0,o._)("li",{key:t+new Date},[(0,o.wy)(((0,o.wg)(),(0,o.iD)("svg",lt,it,512)),[[$.F8,r.targetProduct.rating>e]]),(0,o.wy)(((0,o.wg)(),(0,o.iD)("svg",ct,st,512)),[[$.F8,r.targetProduct.rating<=e]])])})),64))])]),(0,o._)("ul",ut,[(0,o._)("li",null,"商品描述："+(0,d.zw)(r.targetProduct.description),1),(0,o._)("li",null,"商品內容："+(0,d.zw)(r.targetProduct.content),1),(0,o._)("li",null,[(0,o.Uk)((0,d.zw)(r.targetProduct.price)+" ",1),(0,o._)("span",pt,(0,d.zw)(r.targetProduct.origin_price),1),gt])])])]),(0,o._)("div",ft,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.targetProduct.imagesUrl,(function(t){return(0,o.wg)(),(0,o.iD)("img",{key:t,class:"max-h-48 w-1/12 object-cover flex-auto",src:t},null,8,wt)})),128))])])}var mt={class:"bg-gray-900 flex justify-between items-center space-y-3"},bt={class:"text-white text-lg p-4"},vt=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-x h-8 w-8",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1),yt=[vt];function xt(t,e,a,r,l,n){return(0,o.wg)(),(0,o.iD)("div",mt,[(0,o._)("h2",bt,(0,d.zw)(r.title),1),(0,o._)("button",{type:"button",class:"text-gray-50 p-4 transition-all duration-200 ease-in-out hover:text-gray-100 hover:scale-125",onClick:e[0]||(e[0]=function(){return r.closeModal&&r.closeModal.apply(r,arguments)})},yt)])}var _t={setup:function(t,e){console.log(e.attrs);var a=e.attrs.title,o=e.attrs["close-modal"];return{title:a,closeModal:o}}};const kt=(0,B.Z)(_t,[["render",xt]]);var Dt=kt,Ct={components:{ModalCardTitle:Dt},setup:function(){var t=(0,c.Z)(),e=t.modalStore,a=e.state,r=e.closeModal;return{targetProduct:(0,o.Fl)((function(){return a.modalProps})),closeModal:r}}};const Mt=(0,B.Z)(Ct,[["render",ht]]);var Pt=Mt,Ut={class:"space-y-4 bg-gray-50 rounded-md overflow-hidden"},Lt={class:"p-2 text-secondary-500 text-center text-xl"},zt={class:"container flex justify-between gap-4 p-4"};function St(t,e,a,r,l,n){var i=(0,o.up)("ModalCardTitle");return(0,o.wg)(),(0,o.iD)("section",Ut,[(0,o.Wm)(i,{title:"請確認是否刪除","close-modal":r.closeModal},null,8,["close-modal"]),(0,o._)("p",Lt,(0,d.zw)(r.productData.title),1),(0,o._)("div",zt,[(0,o._)("button",{class:"flex-auto p-2 bg-danger-500 text-white hover:bg-danger-600 hover:shadow hover:shadow-danger-500 transition duration-300 rounded-md",type:"button",onClick:e[0]||(e[0]=function(t){return r.handleSetDeleteProduct(r.productData.id)})}," 確認刪除 "),(0,o._)("button",{class:"flex-auto p-2 bg-gray-500 text-white hover:bg-gray-600 hover:shadow hover:shadow-gray-500 transition duration-300 rounded-md",onClick:e[1]||(e[1]=function(){return r.closeModal&&r.closeModal.apply(r,arguments)}),type:"button"}," 取消刪除 ")])])}var It=a(4648),jt={components:{ModalCardTitle:Dt},setup:function(){var t=(0,c.Z)(),e=t.modalStore,a=t.adminProductStore,r=e.closeModal,l=e.state,n=a.handleDeleteProduct,i=(0,O.iH)((0,It.Z)({},l.modalProps));function d(t){n(t),r()}return(0,o.m0)((function(){i.value=(0,It.Z)({},l.modalProps)})),{isOpenModal:(0,o.Fl)((function(){return l.isOpen})),productData:i,handleSetDeleteProduct:d,closeModal:r}}};const Tt=(0,B.Z)(jt,[["render",St]]);var Ft=Tt,Zt={class:"flex flex-col overflow-hidden space-y-4 bg-gray-50 rounded-md pb-4"},qt={class:"flex space-between gap-4"},Et={class:"flex-auto"},At=(0,o._)("label",{for:"productName",class:"block mb-4"},"產品名稱",-1),Ht={class:"flex-auto"},Ot=(0,o._)("label",{for:"productContent",class:"block mb-4"},"產品說明",-1),Vt={class:"flex-auto"},Bt=(0,o._)("label",{for:"productCategory",class:"block mb-4"},"產品類別",-1),Gt=(0,o.uE)('<option value="測試分類">測試分類</option><option value="上衣類">上衣類</option><option value="褲類">褲類</option><option value="裙類">裙類</option><option value="鞋類">鞋類</option>',5),Rt=[Gt],Kt={class:"flex-auto"},Nt=(0,o._)("label",{for:"productRating",class:"block mb-4"},"產品星級",-1),Wt=["value"],Yt={class:"flex space-between gap-4"},$t={class:"flex-auto"},Jt={class:"flex justify-between gap-2"},Qt={class:"flex-1"},Xt=(0,o._)("label",{for:"productMainImage",class:"block mb-4"},"產品主圖片",-1),te=["src"],ee=(0,o._)("label",{for:"productImages",class:"block mb-4"},"產品附屬圖片",-1),ae={class:"flex justify-between gap-2"},oe=["onUpdate:modelValue"],re={class:"relative"},le=["src"],ne=["onClick"],ie=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"currentColor",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),(0,o._)("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"})],-1),ce=[ie],de={class:""},se=(0,o._)("label",{for:"productDescription",class:"block mb-4"},"產品描述",-1),ue={class:"flex space-between gap-4"},pe={class:"flex-auto"},ge=(0,o._)("label",{for:"productIsEnable",class:"block mb-4"},"產品啟用狀態",-1),fe=(0,o._)("option",{value:"0"},"未啟用",-1),we=(0,o._)("option",{value:"1"},"啟用",-1),he=(0,o._)("option",{value:"2"},"未上架",-1),me=(0,o._)("option",{value:"3"},"已下架",-1),be=[fe,we,he,me],ve={class:"flex-auto"},ye=(0,o._)("label",{for:"productOriginPrice",class:"block mb-4"},"產品原價",-1),xe={class:"flex-auto"},_e=(0,o._)("label",{for:"productPrice",class:"block mb-4"},"產品最終價格",-1),ke={class:"flex-auto"},De=(0,o._)("label",{for:"productUnit",class:"block mb-4"},"產品品項單位",-1),Ce={class:"flex justify-between gap-4"},Me={class:"flex-auto py-2 bg-success-500 text-white hover:bg-success-600 hover:shadow hover:shadow-success-400 transition duration-300 rounded-md",type:"submit"};function Pe(t,e,a,r,l,n){var i=(0,o.up)("ModalCardTitle");return(0,o.wg)(),(0,o.iD)("section",Zt,[(0,o.Wm)(i,{title:"productEdit"===r.selectType?"內容編輯":"新增產品","close-modal":r.closeModal},null,8,["title","close-modal"]),(0,o._)("form",{class:"p-4 space-y-4 container",onSubmit:e[12]||(e[12]=(0,$.iM)((function(){return r.handleProductAddition&&r.handleProductAddition.apply(r,arguments)}),["prevent"]))},[(0,o._)("div",qt,[(0,o._)("div",Et,[At,(0,o.wy)((0,o._)("input",{type:"text",id:"productName",name:"productName",class:"rounded w-full","onUpdate:modelValue":e[0]||(e[0]=function(t){return r.productData.title=t}),required:""},null,512),[[$.nr,r.productData.title]])]),(0,o._)("div",Ht,[Ot,(0,o.wy)((0,o._)("input",{type:"text",id:"productContent",name:"productContent",class:"rounded w-full","onUpdate:modelValue":e[1]||(e[1]=function(t){return r.productData.content=t}),required:""},null,512),[[$.nr,r.productData.content]])]),(0,o._)("div",Vt,[Bt,(0,o.wy)((0,o._)("select",{class:"rounded w-full",id:"productCategory",required:"","onUpdate:modelValue":e[2]||(e[2]=function(t){return r.productData.category=t})},Rt,512),[[$.bM,r.productData.category]])]),(0,o._)("div",Kt,[Nt,(0,o.wy)((0,o._)("select",{class:"rounded w-full",id:"productRating",required:"","onUpdate:modelValue":e[3]||(e[3]=function(t){return r.productData.rating=t})},[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(5,(function(t){return(0,o._)("option",{value:t,key:t+new Date},(0,d.zw)(t)+"星 ",9,Wt)})),64))],512),[[$.bM,r.productData.rating]])])]),(0,o._)("div",Yt,[(0,o._)("div",$t,[(0,o._)("div",Jt,[(0,o._)("div",Qt,[Xt,(0,o._)("input",{type:"file",accept:"image/*",id:"productImages",name:"productImages",ref:"imageFile",class:"rounded block w-full text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:bg-secondary-100 file:text-secondary-700 hover:file:bg-secondary-300",onChange:e[4]||(e[4]=function(t){return r.handleGetImageUrl("mainImage")})},null,544)]),r.productData.imageUrl?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"max-h-48 object-cover flex-auto",src:r.productData.imageUrl,alt:"產品主圖"},null,8,te)):(0,o.kq)("",!0)])])]),(0,o._)("div",null,[ee,(0,o._)("input",{type:"file",accept:"image/*",id:"productImages",name:"productImages",ref:"imageFile",class:"rounded block w-full text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:bg-secondary-100 file:text-secondary-700 hover:file:bg-secondary-300",onChange:e[5]||(e[5]=function(t){return r.handleGetImageUrl()})},null,544)]),(0,o._)("ul",ae,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.productData.imagesUrl,(function(t,e){return(0,o.wg)(),(0,o.iD)("li",{class:"flex-auto",key:t+e},[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":function(t){return r.productData.imagesUrl[e]=t},class:"rounded w-full"},null,8,oe),[[$.nr,r.productData.imagesUrl[e]]]),(0,o._)("div",re,[""!==t?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"object-cover max-h-48 w-max rounded-xl",src:t,alt:"附屬圖片"},null,8,le)):(0,o.kq)("",!0),(0,o._)("button",{class:"absolute top-0 right-0 text-secondary-100 p-4",type:"button",onClick:function(t){return r.handleRemoveImageArr(e)}},ce,8,ne)])])})),128))]),(0,o._)("div",de,[se,(0,o.wy)((0,o._)("textarea",{id:"productDescription",name:"productDescription",class:"rounded w-full","onUpdate:modelValue":e[6]||(e[6]=function(t){return r.productData.description=t})},null,512),[[$.nr,r.productData.description]])]),(0,o._)("div",ue,[(0,o._)("div",pe,[ge,(0,o.wy)((0,o._)("select",{class:"rounded w-full",id:"productIsEnable",required:"","onUpdate:modelValue":e[7]||(e[7]=function(t){return r.productData.is_enabled=t})},be,512),[[$.bM,r.productData.is_enabled]])]),(0,o._)("div",ve,[ye,(0,o.wy)((0,o._)("input",{type:"text",id:"productOriginPrice",name:"productOriginPrice",class:"rounded w-full","onUpdate:modelValue":e[8]||(e[8]=function(t){return r.productData.origin_price=t})},null,512),[[$.nr,r.productData.origin_price,void 0,{number:!0}]])]),(0,o._)("div",xe,[_e,(0,o.wy)((0,o._)("input",{type:"text",id:"productPrice",name:"productPrice",class:"rounded w-full",required:"","onUpdate:modelValue":e[9]||(e[9]=function(t){return r.productData.price=t})},null,512),[[$.nr,r.productData.price,void 0,{number:!0}]])]),(0,o._)("div",ke,[De,(0,o.wy)((0,o._)("input",{type:"text",id:"productUnit",name:"productUnit",class:"rounded w-full","onUpdate:modelValue":e[10]||(e[10]=function(t){return r.productData.unit=t})},null,512),[[$.nr,r.productData.unit]])])]),(0,o._)("div",Ce,[(0,o._)("button",Me,(0,d.zw)("productEdit"===r.selectType?"確定修改":"新增產品"),1),(0,o._)("button",{class:"flex-auto py-2 bg-gray-500 text-white hover:bg-gray-600 hover:shadow hover:shadow-gray-400 transition duration-300 rounded-md",onClick:e[11]||(e[11]=function(t){return r.handleResetFormInput()}),type:"reset"},(0,d.zw)("productEdit"===r.selectType?"取消修改":"取消新增"),1)])],32)])}a(561);var Ue={components:{ModalCardTitle:Dt},props:{products:Object},setup:function(t){var e=(0,c.Z)(),a=e.modalStore,r=e.adminProductStore,l=a.state,n=a.closeModal,i=r.handleEditProduct,d=r.handleCreateProduct,s=r.handleImageUpload,u=(0,o.Fl)({get:function(){return Object.assign({},t.products)},set:function(t){return t}}),p=(0,O.iH)(null);function g(){"productEdit"===l.modalType?i(u.value.id,u.value):d(u.value),f()}function f(){u.value={title:"",category:"",origin_price:0,price:0,unit:"",description:"",content:"",is_enabled:"",imageUrl:"",imagesUrl:[]},n()}function w(t){var e=p.value.files[0];console.log(p),console.log(e),s(e).then((function(e){"mainImage"===t?u.value.imageUrl=e.data.imageUrl:u.value.imagesUrl.push(e.data.imageUrl),console.log(e.data)})).catch((function(t){console.dir(t)}))}function h(t){u.value.imagesUrl.splice(t,1)}return{selectType:(0,o.Fl)((function(){return l.modalType})),closeModal:n,productData:u,imageFile:p,handleResetFormInput:f,handleProductAddition:g,handleGetImageUrl:w,handleRemoveImageArr:h}}};const Le=(0,B.Z)(Ue,[["render",Pe]]);var ze=Le,Se={components:{ProductsTable:R,Modal:Y,ModalCardDetail:Pt,ModalCardDelete:Ft,ModalCardAddition:ze},setup:function(){var t=(0,c.Z)(),e=t.adminStore,a=t.modalStore,r=e.handleCheckUser,l=e.handleGetToken,n=a.state,d=(0,i.tv)();return(0,o.wF)((function(){l(),r();var t=l();""===t[0]&&d.push("/login")})),{modalState:(0,o.Fl)((function(){return n.modalType})),products:(0,o.Fl)((function(){return n.modalProps}))}}};const Ie=(0,B.Z)(Se,[["render",n]]);var je=Ie},561:function(t,e,a){var o=a(2109),r=a(7854),l=a(1400),n=a(9303),i=a(6244),c=a(7908),d=a(5417),s=a(6135),u=a(1194),p=u("splice"),g=r.TypeError,f=Math.max,w=Math.min,h=9007199254740991,m="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var a,o,r,u,p,b,v=c(this),y=i(v),x=l(t,y),_=arguments.length;if(0===_?a=o=0:1===_?(a=0,o=y-x):(a=_-2,o=w(f(n(e),0),y-x)),y+a-o>h)throw g(m);for(r=d(v,o),u=0;u<o;u++)p=x+u,p in v&&s(r,u,v[p]);if(r.length=o,a<o){for(u=x;u<y-o;u++)p=u+o,b=u+a,p in v?v[b]=v[p]:delete v[b];for(u=y;u>y-o+a;u--)delete v[u-1]}else if(a>o)for(u=y-o;u>x;u--)p=u+o-1,b=u+a-1,p in v?v[b]=v[p]:delete v[b];for(u=0;u<a;u++)v[u+x]=arguments[u+2];return v.length=y-o+a,r}})},4723:function(t,e,a){var o=a(6916),r=a(7007),l=a(9670),n=a(7466),i=a(1340),c=a(4488),d=a(8173),s=a(1530),u=a(7651);r("match",(function(t,e,a){return[function(e){var a=c(this),r=void 0==e?void 0:d(e,t);return r?o(r,e,a):new RegExp(e)[t](i(a))},function(t){var o=l(this),r=i(t),c=a(e,o,r);if(c.done)return c.value;if(!o.global)return u(o,r);var d=o.unicode;o.lastIndex=0;var p,g=[],f=0;while(null!==(p=u(o,r))){var w=i(p[0]);g[f]=w,""===w&&(o.lastIndex=s(r,n(o.lastIndex),d)),f++}return 0===f?null:g}]}))},1817:function(t,e,a){var o=a(2109),r=a(9781),l=a(7854),n=a(1702),i=a(2597),c=a(614),d=a(7976),s=a(1340),u=a(3070).f,p=a(9920),g=l.Symbol,f=g&&g.prototype;if(r&&c(g)&&(!("description"in f)||void 0!==g().description)){var w={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:s(arguments[0]),e=d(f,this)?new g(t):void 0===t?g():g(t);return""===t&&(w[e]=!0),e};p(h,g),h.prototype=f,f.constructor=h;var m="Symbol(test)"==String(g("test")),b=n(f.toString),v=n(f.valueOf),y=/^Symbol\((.*)\)[^)]+$/,x=n("".replace),_=n("".slice);u(f,"description",{configurable:!0,get:function(){var t=v(this),e=b(t);if(i(w,t))return"";var a=m?_(e,7,-1):x(e,y,"$1");return""===a?void 0:a}}),o({global:!0,forced:!0},{Symbol:h})}}}]);
//# sourceMappingURL=133-legacy.fc734e0b.js.map
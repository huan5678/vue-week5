"use strict";(self["webpackChunkweek5"]=self["webpackChunkweek5"]||[]).push([[133],{8133:function(e,t,a){a.r(t),a.d(t,{default:function(){return St}});var o=a(6252);const l={class:"bg-gray-100"},r={class:"container"};function n(e,t,a,n,d,s){const i=(0,o.up)("ProductsTable"),c=(0,o.up)("ModalCardDelete"),u=(0,o.up)("ModalCardDetail"),p=(0,o.up)("ModalCardAddition"),g=(0,o.up)("Modal");return(0,o.wg)(),(0,o.iD)("main",l,[(0,o._)("div",r,[(0,o.Wm)(i),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>["productDelete"===n.modalState?((0,o.wg)(),(0,o.j4)(c,{key:0})):(0,o.kq)("",!0),"getDetail"===n.modalState?((0,o.wg)(),(0,o.j4)(u,{key:1})):(0,o.kq)("",!0),"productEdit"===n.modalState||"productCreate"===n.modalState?((0,o.wg)(),(0,o.j4)(p,{key:2,products:n.products},null,8,["products"])):(0,o.kq)("",!0)])),_:1})])])}var d=a(2119),s=a(8358),i=a(3577);const c={class:"space-y-4 p-2 overflow-auto"},u={class:"flex justify-end items-center p-6 gap-4"},p=(0,o._)("h2",{class:"text-4xl font-medium"},"產品列表",-1),g=(0,o._)("h2",{class:"text-xl ml-auto"},"管理者登出",-1),w={class:"table-auto mb-4 rounded bg-gray-50"},h=(0,o._)("thead",{class:"bg-gray-800"},[(0,o._)("tr",{class:"text-white"},[(0,o._)("td",{width:"200",class:"p-4 text-lg whitespace-nowrap"},"產品名稱"),(0,o._)("td",{width:"250",class:"p-4 text-lg whitespace-nowrap text-right"}," 原價 "),(0,o._)("td",{width:"250",class:"p-4 text-lg whitespace-nowrap text-right"}," 售價 "),(0,o._)("td",{width:"250",class:"p-4 text-lg whitespace-nowrap text-center"}," 是否啟用 "),(0,o._)("td",{width:"200",class:"p-4 text-lg whitespace-nowrap text-center"}," 查看細節 "),(0,o._)("td",{colspan:"2",width:"400",class:"p-4 text-lg whitespace-nowrap text-center"}," 功能 ")])],-1),m={class:"py-2 px-4 whitespace-nowrap"},b={class:"py-2 px-4 whitespace-nowrap text-right"},y={class:"py-2 px-4 whitespace-nowrap text-right"},x={key:0,class:"py-2 px-4 whitespace-nowrap text-primary-400 text-center"},_={key:1,class:"py-2 px-4 whitespace-nowrap text-gray-400 text-center"},f={key:2,class:"py-2 px-4 whitespace-nowrap text-warning-600 text-center"},v={key:3,class:"py-2 px-4 whitespace-nowrap text-danger-700 text-center"},k={class:"py-2 px-4 text-center whitespace-nowrap"},D=["onClick"],C={class:"py-2 px-4 text-center whitespace-nowrap"},M=["onClick"],P={class:"py-2 px-4 text-center whitespace-nowrap"},U=["onClick"],L={class:"flex justify-between items-center"},z={class:"flex justify-center items-center gap-2"},I={class:""},S=["disabled"],j=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"})],-1),T=[j],F=["onClick"],q={class:""},Z=["disabled"],H=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"})],-1),A=[H];function E(e,t,a,l,r,n){return(0,o.wg)(),(0,o.iD)("section",c,[(0,o._)("div",u,[p,g,(0,o._)("button",{class:"rounded px-6 py-2 bg-danger-500 text-white hover:bg-danger-600 hover:shadow hover:shadow-danger-400 transition duration-300",onClick:t[0]||(t[0]=e=>l.handleIsLogout())}," 登出 ")]),(0,o._)("table",w,[h,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.productList.products,(e=>((0,o.wg)(),(0,o.iD)("tr",{class:"border-b border-gray-300 hover:bg-gray-200",key:e.id},[(0,o._)("td",m,(0,i.zw)(e.title),1),(0,o._)("td",b,(0,i.zw)(e.origin_price),1),(0,o._)("td",y,(0,i.zw)(e.price),1),1==e.is_enabled?((0,o.wg)(),(0,o.iD)("td",x," 啟用 ")):0==e.is_enabled?((0,o.wg)(),(0,o.iD)("td",_," 未啟用 ")):2==e.is_enabled?((0,o.wg)(),(0,o.iD)("td",f," 未上架 ")):(0,o.kq)("",!0),3==e.is_enabled?((0,o.wg)(),(0,o.iD)("td",v," 已下架 ")):(0,o.kq)("",!0),(0,o._)("td",k,[(0,o._)("button",{type:"button",class:"text-white bg-primary-500 rounded py-2 px-4 hover:bg-primary-600 hover:shadow hover:shadow-primary-400 transition duration-200",onClick:t=>l.openModal("getDetail",e)}," 查看細節 ",8,D)]),(0,o._)("td",C,[(0,o._)("button",{type:"button",class:"text-white bg-secondary-700 rounded py-2 px-4 hover:bg-secondary-800 hover:shadow hover:shadow-secondary-400 transition duration-200",onClick:t=>l.openModal("productEdit",e)}," 修改內容 ",8,M)]),(0,o._)("td",P,[(0,o._)("button",{type:"button",class:"text-white bg-danger-500 rounded py-2 px-4 hover:bg-danger-600 hover:shadow hover:shadow-danger-400 transition duration-200",onClick:t=>l.openModal("productDelete",e)}," 刪除品項 ",8,U)])])))),128))])]),(0,o._)("div",L,[(0,o._)("p",null,"目前有"+(0,i.zw)(l.productList.products.length)+"項產品",1),(0,o._)("button",{type:"button",class:"text-white bg-warning-500 rounded py-2 px-4 hover:bg-warning-600 hover:shadow hover:shadow-warning-400 transition duration-200",onClick:t[1]||(t[1]=e=>l.openModal("productCreate",l.tempProduct))}," 新增品項 ")]),(0,o._)("div",null,[(0,o._)("ul",z,[(0,o._)("li",I,[(0,o._)("button",{type:"button",class:"p-2 rounded border border-primary-500 text-primary-500 disabled:border-gray-400 disabled:text-gray-500",disabled:!l.productList.pagination.has_pre,onClick:t[2]||(t[2]=e=>l.handleGetProductList(l.productList.pagination.current_page-1))},T,8,S)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.productList.pagination.total_pages,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e+new Date},[(0,o._)("button",{type:"button",class:(0,i.C_)(["py-[6px] px-3 rounded border-primary-500",{"bg-primary-700 text-white":e===l.productList.pagination.current_page}]),onClick:t=>l.handleGetProductList(e)},(0,i.zw)(e),11,F)])))),128)),(0,o._)("li",q,[(0,o._)("button",{type:"button",class:"p-2 rounded border border-primary-500 text-primary-500 disabled:border-gray-400 disabled:text-gray-500",disabled:!l.productList.pagination.has_next,onClick:t[3]||(t[3]=e=>l.handleGetProductList(l.productList.pagination.current_page+1))},A,8,Z)])])])])}var O=a(2262),V={setup(){const{adminStore:e,adminProductStore:t,modalStore:a}=(0,s.Z)(),{handleSetLogout:l,handleClearToken:r}=e,{productList:n,handleGetProductList:i}=t,{openModal:c}=a,u=(0,d.tv)(),p=(0,O.iH)({title:"",category:"",origin_price:0,price:0,unit:"",description:"",content:"",is_enabled:"",imageUrl:"",imagesUrl:[]});function g(){r(),l(),u.push("/")}return(0,o.bv)((()=>{i()})),{productList:(0,o.Fl)((()=>n)),openModal:c,tempProduct:p,handleIsLogout:g,handleGetProductList:i}}},B=a(3744);const G=(0,B.Z)(V,[["render",E]]);var R=G;function K(e,t,a,l,r,n){return(0,o.wg)(),(0,o.j4)(o.lR,{to:"body"},[(0,o._)("div",{ref:"targetElement",class:(0,i.C_)(["absolute top-0 left-0 right-0 bottom-0 w-full h-full min-h-screen bg-gray-700 bg-opacity-50 backdrop-blur-[2px] backdrop",l.isOpenModal?"":"invisible -z-10"]),onClick:t[0]||(t[0]=(...e)=>l.handlerBackdropClick&&l.handlerBackdropClick(...e))},[(0,o._)("div",{class:(0,i.C_)(["transition-all container backdrop p-8 flex justify-center items-center",l.isOpenModal?"ease-[cubic-bezier(.51,.24,.32,1.3)] duration-300":"scale-0 opacity-0 ease-[cubic-bezier(.31,1.09,1,.99)] duration-75"])},[(0,o.WI)(e.$slots,"default")],2)],2)])}var N={setup(){const{modalStore:e}=(0,s.Z)(),{state:t,closeModal:a}=e;function l(e){if("svg"===e.path[0].nodeName||"path"===e.path[0].nodeName)return null;e.path[0].className.match("backdrop")&&a()}return{isOpenModal:(0,o.Fl)((()=>t.isOpen)),handlerBackdropClick:l}}};const W=(0,B.Z)(N,[["render",K]]);var Y=W,$=a(9963);const J={class:"flex flex-col overflow-hidden space-y-4 bg-gray-50 rounded-md pb-4"},Q={class:"flex justify-between p-4"},X=["src","alt"],ee={class:"p-4 flex-1 space-y-8"},te={class:"flex items-center gap-4"},ae={class:"font-bold text-xl mb-2"},oe={class:"px-2 py-1 ml-2 rounded text-sm bg-primary-400 text-white"},le={class:"flex items-center gap-1"},re={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 text-warning-500",viewBox:"0 0 16 16"},ne=(0,o._)("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"},null,-1),de=[ne],se={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 text-gray-400",viewBox:"0 0 16 16"},ie=(0,o._)("path",{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"},null,-1),ce=[ie],ue={class:"space-y-4"},pe={class:"pl-1 text-gray-400 line-through"},ge=(0,o.Uk)(" 個 / 元 "),we={class:"flex gap-4 overflow-x-auto"},he=["src"];function me(e,t,a,l,r,n){const d=(0,o.up)("ModalCardTitle");return(0,o.wg)(),(0,o.iD)("section",J,[(0,o.Wm)(d,{title:"產品詳細內容","close-modal":l.closeModal},null,8,["close-modal"]),(0,o._)("div",Q,[(0,o._)("img",{class:"max-h-[300px]",src:l.targetProduct.imageUrl,alt:l.targetProduct.title},null,8,X),(0,o._)("div",ee,[(0,o._)("div",te,[(0,o._)("h2",ae,[(0,o.Uk)((0,i.zw)(l.targetProduct.title)+" ",1),(0,o._)("span",oe,(0,i.zw)(l.targetProduct.category),1)]),(0,o._)("ul",le,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(5,((e,t)=>(0,o._)("li",{key:e+new Date},[(0,o.wy)(((0,o.wg)(),(0,o.iD)("svg",re,de,512)),[[$.F8,l.targetProduct.rating>t]]),(0,o.wy)(((0,o.wg)(),(0,o.iD)("svg",se,ce,512)),[[$.F8,l.targetProduct.rating<=t]])]))),64))])]),(0,o._)("ul",ue,[(0,o._)("li",null,"商品描述："+(0,i.zw)(l.targetProduct.description),1),(0,o._)("li",null,"商品內容："+(0,i.zw)(l.targetProduct.content),1),(0,o._)("li",null,[(0,o.Uk)((0,i.zw)(l.targetProduct.price)+" ",1),(0,o._)("span",pe,(0,i.zw)(l.targetProduct.origin_price),1),ge])])])]),(0,o._)("div",we,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.targetProduct.imagesUrl,(e=>((0,o.wg)(),(0,o.iD)("img",{key:e,class:"max-h-48 w-1/12 object-cover flex-auto",src:e},null,8,he)))),128))])])}const be={class:"bg-gray-900 flex justify-between items-center space-y-3"},ye={class:"text-white text-lg p-4"},xe=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-x h-8 w-8",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1),_e=[xe];function fe(e,t,a,l,r,n){return(0,o.wg)(),(0,o.iD)("div",be,[(0,o._)("h2",ye,(0,i.zw)(l.title),1),(0,o._)("button",{type:"button",class:"text-gray-50 p-4 transition-all duration-200 ease-in-out hover:text-gray-100 hover:scale-125",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))},_e)])}var ve={setup(e,t){console.log(t.attrs);const a=t.attrs.title,o=t.attrs["close-modal"];return{title:a,closeModal:o}}};const ke=(0,B.Z)(ve,[["render",fe]]);var De=ke,Ce={components:{ModalCardTitle:De},setup(){const{modalStore:e}=(0,s.Z)(),{state:t,closeModal:a}=e;return{targetProduct:(0,o.Fl)((()=>t.modalProps)),closeModal:a}}};const Me=(0,B.Z)(Ce,[["render",me]]);var Pe=Me;const Ue={class:"space-y-4 bg-gray-50 rounded-md overflow-hidden"},Le={class:"p-2 text-secondary-500 text-center text-xl"},ze={class:"container flex justify-between gap-4 p-4"};function Ie(e,t,a,l,r,n){const d=(0,o.up)("ModalCardTitle");return(0,o.wg)(),(0,o.iD)("section",Ue,[(0,o.Wm)(d,{title:"請確認是否刪除","close-modal":l.closeModal},null,8,["close-modal"]),(0,o._)("p",Le,(0,i.zw)(l.productData.title),1),(0,o._)("div",ze,[(0,o._)("button",{class:"flex-auto p-2 bg-danger-500 text-white hover:bg-danger-600 hover:shadow hover:shadow-danger-500 transition duration-300 rounded-md",type:"button",onClick:t[0]||(t[0]=e=>l.handleSetDeleteProduct(l.productData.id))}," 確認刪除 "),(0,o._)("button",{class:"flex-auto p-2 bg-gray-500 text-white hover:bg-gray-600 hover:shadow hover:shadow-gray-500 transition duration-300 rounded-md",onClick:t[1]||(t[1]=(...e)=>l.closeModal&&l.closeModal(...e)),type:"button"}," 取消刪除 ")])])}var Se={components:{ModalCardTitle:De},setup(){const{modalStore:e,adminProductStore:t}=(0,s.Z)(),{closeModal:a,state:l}=e,{handleDeleteProduct:r}=t,n=(0,O.iH)({...l.modalProps});function d(e){r(e),a()}return(0,o.m0)((()=>{n.value={...l.modalProps}})),{isOpenModal:(0,o.Fl)((()=>l.isOpen)),productData:n,handleSetDeleteProduct:d,closeModal:a}}};const je=(0,B.Z)(Se,[["render",Ie]]);var Te=je;const Fe={class:"flex flex-col overflow-hidden space-y-4 bg-gray-50 rounded-md pb-4"},qe={class:"flex space-between gap-4"},Ze={class:"flex-auto"},He=(0,o._)("label",{for:"productName",class:"block mb-4"},"產品名稱",-1),Ae={class:"flex-auto"},Ee=(0,o._)("label",{for:"productContent",class:"block mb-4"},"產品說明",-1),Oe={class:"flex-auto"},Ve=(0,o._)("label",{for:"productCategory",class:"block mb-4"},"產品類別",-1),Be=(0,o.uE)('<option value="測試分類">測試分類</option><option value="上衣類">上衣類</option><option value="褲類">褲類</option><option value="裙類">裙類</option><option value="鞋類">鞋類</option>',5),Ge=[Be],Re={class:"flex-auto"},Ke=(0,o._)("label",{for:"productRating",class:"block mb-4"},"產品星級",-1),Ne=["value"],We={class:"flex space-between gap-4"},Ye={class:"flex-auto"},$e={class:"flex justify-between gap-2"},Je={class:"flex-1"},Qe=(0,o._)("label",{for:"productMainImage",class:"block mb-4"},"產品主圖片",-1),Xe=["src"],et=(0,o._)("label",{for:"productImages",class:"block mb-4"},"產品附屬圖片",-1),tt={class:"flex justify-between gap-2"},at=["onUpdate:modelValue"],ot={class:"relative"},lt=["src"],rt=["onClick"],nt=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"currentColor",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),(0,o._)("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"})],-1),dt=[nt],st={class:""},it=(0,o._)("label",{for:"productDescription",class:"block mb-4"},"產品描述",-1),ct={class:"flex space-between gap-4"},ut={class:"flex-auto"},pt=(0,o._)("label",{for:"productIsEnable",class:"block mb-4"},"產品啟用狀態",-1),gt=(0,o._)("option",{value:"0"},"未啟用",-1),wt=(0,o._)("option",{value:"1"},"啟用",-1),ht=(0,o._)("option",{value:"2"},"未上架",-1),mt=(0,o._)("option",{value:"3"},"已下架",-1),bt=[gt,wt,ht,mt],yt={class:"flex-auto"},xt=(0,o._)("label",{for:"productOriginPrice",class:"block mb-4"},"產品原價",-1),_t={class:"flex-auto"},ft=(0,o._)("label",{for:"productPrice",class:"block mb-4"},"產品最終價格",-1),vt={class:"flex-auto"},kt=(0,o._)("label",{for:"productUnit",class:"block mb-4"},"產品品項單位",-1),Dt={class:"flex justify-between gap-4"},Ct={class:"flex-auto py-2 bg-success-500 text-white hover:bg-success-600 hover:shadow hover:shadow-success-400 transition duration-300 rounded-md",type:"submit"};function Mt(e,t,a,l,r,n){const d=(0,o.up)("ModalCardTitle");return(0,o.wg)(),(0,o.iD)("section",Fe,[(0,o.Wm)(d,{title:"productEdit"===l.selectType?"內容編輯":"新增產品","close-modal":l.closeModal},null,8,["title","close-modal"]),(0,o._)("form",{class:"p-4 space-y-4 container",onSubmit:t[12]||(t[12]=(0,$.iM)(((...e)=>l.handleProductAddition&&l.handleProductAddition(...e)),["prevent"]))},[(0,o._)("div",qe,[(0,o._)("div",Ze,[He,(0,o.wy)((0,o._)("input",{type:"text",id:"productName",name:"productName",class:"rounded w-full","onUpdate:modelValue":t[0]||(t[0]=e=>l.productData.title=e),required:""},null,512),[[$.nr,l.productData.title]])]),(0,o._)("div",Ae,[Ee,(0,o.wy)((0,o._)("input",{type:"text",id:"productContent",name:"productContent",class:"rounded w-full","onUpdate:modelValue":t[1]||(t[1]=e=>l.productData.content=e),required:""},null,512),[[$.nr,l.productData.content]])]),(0,o._)("div",Oe,[Ve,(0,o.wy)((0,o._)("select",{class:"rounded w-full",id:"productCategory",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>l.productData.category=e)},Ge,512),[[$.bM,l.productData.category]])]),(0,o._)("div",Re,[Ke,(0,o.wy)((0,o._)("select",{class:"rounded w-full",id:"productRating",required:"","onUpdate:modelValue":t[3]||(t[3]=e=>l.productData.rating=e)},[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(5,(e=>(0,o._)("option",{value:e,key:e+new Date},(0,i.zw)(e)+"星 ",9,Ne))),64))],512),[[$.bM,l.productData.rating]])])]),(0,o._)("div",We,[(0,o._)("div",Ye,[(0,o._)("div",$e,[(0,o._)("div",Je,[Qe,(0,o._)("input",{type:"file",accept:"image/*",id:"productImages",name:"productImages",ref:"imageFile",class:"rounded block w-full text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:bg-secondary-100 file:text-secondary-700 hover:file:bg-secondary-300",onChange:t[4]||(t[4]=e=>l.handleGetImageUrl("mainImage"))},null,544)]),l.productData.imageUrl?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"max-h-48 object-cover flex-auto",src:l.productData.imageUrl,alt:"產品主圖"},null,8,Xe)):(0,o.kq)("",!0)])])]),(0,o._)("div",null,[et,(0,o._)("input",{type:"file",accept:"image/*",id:"productImages",name:"productImages",ref:"imageFile",class:"rounded block w-full text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:bg-secondary-100 file:text-secondary-700 hover:file:bg-secondary-300",onChange:t[5]||(t[5]=e=>l.handleGetImageUrl())},null,544)]),(0,o._)("ul",tt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.productData.imagesUrl,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{class:"flex-auto",key:e+t},[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>l.productData.imagesUrl[t]=e,class:"rounded w-full"},null,8,at),[[$.nr,l.productData.imagesUrl[t]]]),(0,o._)("div",ot,[""!==e?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"object-cover max-h-48 w-max rounded-xl",src:e,alt:"附屬圖片"},null,8,lt)):(0,o.kq)("",!0),(0,o._)("button",{class:"absolute top-0 right-0 text-secondary-100 p-4",type:"button",onClick:e=>l.handleRemoveImageArr(t)},dt,8,rt)])])))),128))]),(0,o._)("div",st,[it,(0,o.wy)((0,o._)("textarea",{id:"productDescription",name:"productDescription",class:"rounded w-full","onUpdate:modelValue":t[6]||(t[6]=e=>l.productData.description=e)},null,512),[[$.nr,l.productData.description]])]),(0,o._)("div",ct,[(0,o._)("div",ut,[pt,(0,o.wy)((0,o._)("select",{class:"rounded w-full",id:"productIsEnable",required:"","onUpdate:modelValue":t[7]||(t[7]=e=>l.productData.is_enabled=e)},bt,512),[[$.bM,l.productData.is_enabled]])]),(0,o._)("div",yt,[xt,(0,o.wy)((0,o._)("input",{type:"text",id:"productOriginPrice",name:"productOriginPrice",class:"rounded w-full","onUpdate:modelValue":t[8]||(t[8]=e=>l.productData.origin_price=e)},null,512),[[$.nr,l.productData.origin_price,void 0,{number:!0}]])]),(0,o._)("div",_t,[ft,(0,o.wy)((0,o._)("input",{type:"text",id:"productPrice",name:"productPrice",class:"rounded w-full",required:"","onUpdate:modelValue":t[9]||(t[9]=e=>l.productData.price=e)},null,512),[[$.nr,l.productData.price,void 0,{number:!0}]])]),(0,o._)("div",vt,[kt,(0,o.wy)((0,o._)("input",{type:"text",id:"productUnit",name:"productUnit",class:"rounded w-full","onUpdate:modelValue":t[10]||(t[10]=e=>l.productData.unit=e)},null,512),[[$.nr,l.productData.unit]])])]),(0,o._)("div",Dt,[(0,o._)("button",Ct,(0,i.zw)("productEdit"===l.selectType?"確定修改":"新增產品"),1),(0,o._)("button",{class:"flex-auto py-2 bg-gray-500 text-white hover:bg-gray-600 hover:shadow hover:shadow-gray-400 transition duration-300 rounded-md",onClick:t[11]||(t[11]=e=>l.handleResetFormInput()),type:"reset"},(0,i.zw)("productEdit"===l.selectType?"取消修改":"取消新增"),1)])],32)])}var Pt={components:{ModalCardTitle:De},props:{products:Object},setup(e){const{modalStore:t,adminProductStore:a}=(0,s.Z)(),{state:l,closeModal:r}=t,{handleEditProduct:n,handleCreateProduct:d,handleImageUpload:i}=a,c=(0,o.Fl)({get:()=>Object.assign({},e.products),set:e=>e}),u=(0,O.iH)(null);function p(){"productEdit"===l.modalType?n(c.value.id,c.value):d(c.value),g()}function g(){c.value={title:"",category:"",origin_price:0,price:0,unit:"",description:"",content:"",is_enabled:"",imageUrl:"",imagesUrl:[]},r()}function w(e){const t=u.value.files[0];console.log(u),console.log(t),i(t).then((t=>{"mainImage"===e?c.value.imageUrl=t.data.imageUrl:c.value.imagesUrl.push(t.data.imageUrl),console.log(t.data)})).catch((e=>{console.dir(e)}))}function h(e){c.value.imagesUrl.splice(e,1)}return{selectType:(0,o.Fl)((()=>l.modalType)),closeModal:r,productData:c,imageFile:u,handleResetFormInput:g,handleProductAddition:p,handleGetImageUrl:w,handleRemoveImageArr:h}}};const Ut=(0,B.Z)(Pt,[["render",Mt]]);var Lt=Ut,zt={components:{ProductsTable:R,Modal:Y,ModalCardDetail:Pe,ModalCardDelete:Te,ModalCardAddition:Lt},setup(){const{adminStore:e,modalStore:t}=(0,s.Z)(),{handleCheckUser:a,handleGetToken:l}=e,{state:r}=t,n=(0,d.tv)();return(0,o.wF)((()=>{l(),a();const e=l();""===e[0]&&n.push("/login")})),{modalState:(0,o.Fl)((()=>r.modalType)),products:(0,o.Fl)((()=>r.modalProps))}}};const It=(0,B.Z)(zt,[["render",n]]);var St=It}}]);
//# sourceMappingURL=133.93dc6532.js.map